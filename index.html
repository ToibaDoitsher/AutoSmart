<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T.Doitsher | AI פיתוח אתרים & אוטומציה עסקית</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><linearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' style='stop-color:%2306b6d4;stop-opacity:1' /><stop offset='100%25' style='stop-color:%238b5cf6;stop-opacity:1' /></linearGradient><path fill='url(%23g)' d='M94.5,41.5l-8.6-1.4c-0.6-2-1.4-4-2.4-5.8l5.1-7.1c1.1-1.5,0.9-3.6-0.5-4.9l-5.8-5.8c-1.3-1.3-3.4-1.5-4.9-0.5l-7.1,5.1c-1.8-1-3.8-1.8-5.8-2.4l-1.4-8.6C62.8,8.4,61.1,7,59.2,7h-8.2c-1.9,0-3.6,1.4-3.9,3.2l-1.4,8.6c-2,0.6-4,1.4-5.8,2.4L32.8,16c-1.5-1.1-3.6-0.9-4.9,0.5l-5.8,5.8c-1.3,1.3-1.5,3.4-0.5,4.9l5.1,7.1c-1,1.8-1.8,3.8-2.4,5.8l-8.6,1.4C13.8,41.8,12.4,43.5,12.4,45.4v8.2c0,1.9,1.4,3.6,3.2,3.9l8.6,1.4c0.6,2,1.4,4,2.4,5.8l-5.1,7.1c-1.1,1.5-0.9,3.6,0.5,4.9l5.8,5.8c1.3,1.3,3.4,1.5,4.9,0.5l7.1-5.1c1.8,1,3.8,1.8,5.8,2.4l1.4,8.6c0.3,1.9,2,3.2,3.9,3.2h8.2c1.9,0,3.6-1.4,3.9-3.2l1.4-8.6c2-0.6,4-1.4,5.8-2.4l7.1,5.1c1.5,1.1,3.6,0.9,4.9-0.5l5.8-5.8c1.3-1.3,1.5-3.4,0.5-4.9l-5.1-7.1c1-1.8,1.8-3.8,2.4-5.8l8.6-1.4c1.8-0.3,3.2-2,3.2-3.9v-8.2C97.7,43.5,96.3,41.8,94.5,41.5z M55.1,66.4c-9.1,0-16.4-7.4-16.4-16.4s7.4-16.4,16.4-16.4s16.4,7.4,16.4,16.4S64.1,66.4,55.1,66.4z'/></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;700;900&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --primary: #06b6d4; /* Cyan 500 */
            --secondary: #8b5cf6; /* Violet 500 */
            --dark: #05070f;
            /* הותאם לצבעי האתר */
            --chat-primary: #06b6d4;
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Heebo', sans-serif;
            background-color: var(--dark);
            color: white;
            overflow-x: hidden;
            cursor: none; /* Hide default cursor */
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0b1328;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--primary);
            border-radius: 4px;
        }

        /* Custom Cursor */
        #cursor {
            position: fixed;
            top: 0;
            left: 0;
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 9999;
            transform: translate(-50%, -50%);
            transition: width 0.3s, height 0.3s, background 0.3s, border-color 0.3s;
            mix-blend-mode: difference;
        }
        #cursor-dot {
            position: fixed;
            top: 0;
            left: 0;
            width: 8px;
            height: 8px;
            background: var(--primary);
            border-radius: 50%;
            pointer-events: none;
            z-index: 10000;
            transform: translate(-50%, -50%);
        }

        /* Glassmorphism */
        .glass {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        /* Neon Glow Text */
        .glow-text {
            text-shadow: 0 0 10px rgba(6, 182, 212, 0.7), 0 0 20px rgba(6, 182, 212, 0.5);
        }

        /* 3D Tilt Effect Base */
        .tilt-card {
            transform-style: preserve-3d;
            transform: perspective(1000px);
        }

        /* Animations */
        .fade-up {
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease-out;
        }
        .fade-up.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Gradient Text Animation */
        .animate-gradient {
            background-size: 200% auto;
            animation: textShine 4s linear infinite;
        }
        @keyframes textShine {
            to { background-position: 200% center; }
        }

        /* Particle Canvas */
        #particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        /* Typing Cursor */
        .typing-cursor::after {
            content: '|';
            animation: blink 1s step-start infinite;
        }
        @keyframes blink { 50% { opacity: 0; } }
        
        /* Preloader */
        #preloader {
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 99999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease;
        }
        .loader {
            width: 50px;
            height: 50px;
            border: 5px solid var(--primary);
            border-bottom-color: transparent;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 100% { transform: rotate(360deg); } }

        /* --- Chat Widget Styles Improved --- */
        #chat-widget-button {
            position: fixed; bottom: 20px; right: 20px;
            width: 65px; height: 65px; border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            display: flex; justify-content: center; align-items: center;
            cursor: pointer; box-shadow: 0 0 20px rgba(6, 182, 212, 0.5);
            z-index: 1000; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            font-size: 28px;
        }
        #chat-widget-button:hover { transform: scale(1.1) rotate(10deg); }

        #chat-window {
            position: fixed; bottom: 100px; right: 20px;
            width: 380px; height: 520px;
            background: rgba(5, 7, 15, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(6, 182, 212, 0.3);
            border-radius: 24px;
            display: none; flex-direction: column;
            box-shadow: 0 20px 50px rgba(0,0,0,0.8);
            z-index: 1000; overflow: hidden;
            animation: slideIn 0.4s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        #chat-header { 
            background: linear-gradient(90deg, var(--primary), var(--secondary)); 
            padding: 18px; 
            text-align: center; 
            font-weight: 900; 
            letter-spacing: 1px;
            text-transform: uppercase;
            font-size: 14px;
        }
        #chat-messages { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 12px; }
        
        .msg { max-width: 85%; padding: 12px 16px; border-radius: 18px; font-size: 0.95rem; line-height: 1.5; position: relative; }
        .user-msg { align-self: flex-start; background: rgba(255,255,255,0.07); border-bottom-right-radius: 4px; border: 1px solid rgba(255,255,255,0.1); }
        .bot-msg { align-self: flex-end; background: linear-gradient(135deg, #0891b2, #7c3aed); border-bottom-left-radius: 4px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); }

        #chat-input-area { display: flex; padding: 15px; border-top: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.2); }
        #chat-input { flex: 1; background: transparent; border: none; color: white; outline: none; padding-left: 10px; font-size: 0.95rem; }
        #send-btn { 
            cursor: pointer; 
            background: var(--primary); 
            color: black; 
            padding: 6px 15px; 
            border-radius: 10px; 
            font-weight: bold; 
            transition: all 0.2s;
        }
        #send-btn:hover { transform: scale(1.05); background: white; }

        /* Thinking Dots Animation */
        .typing-indicator {
            display: flex; gap: 4px; padding: 10px; align-self: flex-end; background: rgba(255,255,255,0.05); border-radius: 15px; margin-bottom: 10px;
        }
        .typing-indicator span {
            width: 6px; height: 6px; background: var(--primary); border-radius: 50%; animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1.0); }
        }

    </style>
</head>
<body class="selection:bg-cyan-500 selection:text-black">

    <div id="preloader">
        <div class="loader"></div>
    </div>

    <div id="cursor"></div>
    <div id="cursor-dot"></div>

    <canvas id="particles"></canvas>

    <nav class="fixed w-full z-50 glass top-0 start-0 border-b border-white/10">
        <div class="max-w-7xl mx-auto flex flex-wrap items-center justify-between px-6 py-4">
            <a href="#" class="flex items-center gap-3 group">
          <img src="./favicon.png" alt="Toiby Logo" class="h-20 md:h-24 w-auto logo-glow mx-2 transform hover:scale-110 transition-transform">
            </a>
            <div class="hidden md:flex space-x-8 space-x-reverse text-sm font-medium">
                <a href="#services" class="hover:text-cyan-400 transition-colors">שירותים</a>
                <a href="#projects" class="hover:text-cyan-400 transition-colors">פרויקטים</a>
                <a href="#stats" class="hover:text-cyan-400 transition-colors">מספרים</a>
                <a href="#contact" class="px-5 py-2 bg-cyan-600/20 text-cyan-400 border border-cyan-500/50 rounded-full hover:bg-cyan-500 hover:text-black transition-all">צור קשר</a>
            </div>
        </div>
    </nav>

    <main class="pt-32 pb-10 px-6 max-w-7xl mx-auto relative z-10">

        <section class="min-h-[80vh] flex flex-col justify-center items-center text-center relative">
            <div class="absolute top-10 w-64 h-64 bg-cyan-500/20 rounded-full blur-[100px] -z-10 animate-pulse"></div>
            
            <h2 class="text-cyan-400 tracking-[0.2em] text-sm font-bold mb-4 fade-up">FUTURE OF BUSINESS</h2>
            
            <h1 class="text-5xl md:text-8xl font-black mb-6 leading-tight fade-up">
                פתרונות <span class="bg-gradient-to-r from-cyan-400 via-purple-500 to-cyan-400 bg-clip-text text-transparent animate-gradient">חכמים</span><br>
                לעסק שלך
            </h1>

            <p class="text-xl md:text-2xl text-gray-300 mb-8 h-8 fade-up">
                אני מתמחה ב<span id="typewriter" class="text-cyan-400 font-bold typing-cursor"></span>
            </p>

            <p class="max-w-2xl text-gray-400 mb-10 leading-relaxed fade-up">
                הגיע הזמן שהעסק יעבוד בשבילך. מערכות אוטומציה שמחליפות עבודה ידנית, חוסכות זמן ומייצרות רווחים, בטכנולוגיה המתקדמת ביותר.
            </p>

            <div class="flex gap-4 fade-up">
                <a href="#contact" class="group relative px-8 py-4 bg-white text-black font-bold rounded-full overflow-hidden">
                    <span class="relative z-10 group-hover:text-white transition-colors">התחל עכשיו</span>
                    <div class="absolute inset-0 bg-cyan-600 transform scale-x-0 group-hover:scale-x-100 transition-transform origin-left duration-300"></div>
                </a>
                <a href="#projects" class="px-8 py-4 border border-white/20 rounded-full hover:bg-white/10 transition-all backdrop-blur-sm">
                    תיק עבודות
                </a>
            </div>
        </section>

        <section id="stats" class="grid grid-cols-2 md:grid-cols-4 gap-8 py-20 border-y border-white/5 bg-white/5 rounded-3xl mb-24 glass fade-up">
            <div class="text-center">
                <div class="text-4xl font-black text-cyan-400 counter" data-target="100">0</div>
                <div class="text-sm text-gray-400 mt-2">% דיוק בנתונים</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-black text-purple-400 counter" data-target="50">0</div>
                <div class="text-sm text-gray-400 mt-2">+ פרויקטים מוצלחים</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-black text-cyan-400 counter" data-target="24">0</div>
                <div class="text-sm text-gray-400 mt-2">/7 מערכות עובדות</div>
            </div>
            <div class="text-center">
                <div class="text-4xl font-black text-purple-400 counter" data-target="1000">0</div>
                <div class="text-sm text-gray-400 mt-2">+ שעות נחסכו</div>
            </div>
        </section>

        <section id="services" class="py-20">
            <h2 class="text-4xl font-bold mb-16 text-center fade-up"><span class="border-b-4 border-cyan-500 pb-2">השירותים שלי</span></h2>
            
            <div class="grid md:grid-cols-3 gap-8 perspective-1000">
                <div class="glass p-8 rounded-3xl tilt-card relative overflow-hidden group fade-up">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-purple-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>
                    <div class="w-14 h-14 bg-cyan-900/50 rounded-2xl flex items-center justify-center mb-6 text-cyan-400 text-2xl group-hover:rotate-12 transition-transform">
                        <i class="fa-solid fa-robot"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">אוטומציה עסקית</h3>
                    <p class="text-gray-400 leading-relaxed">
                        בניית "רובוטים" דיגיטליים שמבצעים משימות חוזרות. חיבור Make, Zapier וניהול תהליכים אוטומטי מלא.
                    </p>
                </div>

                <div class="glass p-8 rounded-3xl tilt-card relative overflow-hidden group fade-up" style="transition-delay: 100ms;">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-purple-500 to-cyan-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>
                    <div class="w-14 h-14 bg-purple-900/50 rounded-2xl flex items-center justify-center mb-6 text-purple-400 text-2xl group-hover:rotate-12 transition-transform">
                        <i class="fa-solid fa-link"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">אינטגרציות API</h3>
                    <p class="text-gray-400 leading-relaxed">
                        הכל מדבר עם הכל. חיבור ה-CRM לוואטסאפ, למייל, ליומן גוגל ולמערכת הנהלת החשבונות.
                    </p>
                </div>

                <div class="glass p-8 rounded-3xl tilt-card relative overflow-hidden group fade-up" style="transition-delay: 200ms;">
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-cyan-500 to-purple-500 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500"></div>
                    <div class="w-14 h-14 bg-cyan-900/50 rounded-2xl flex items-center justify-center mb-6 text-cyan-400 text-2xl group-hover:rotate-12 transition-transform">
                        <i class="fa-solid fa-brain"></i>
                    </div>
                    <h3 class="text-2xl font-bold mb-4">בינה מלאכותית (AI)</h3>
                    <p class="text-gray-400 leading-relaxed">
                        הטמעת ChatGPT וכלים חכמים לניתוח נתונים, יצירת תוכן אוטומטי ושיפור קבלת החלטות.
                    </p>
                </div>
            </div>
        </section>

        <section id="projects" class="py-20">
            <h2 class="text-4xl font-bold mb-16 text-center fade-up">מערכות לדוגמה</h2>
            <div class="grid md:grid-cols-3 gap-6">
                
                <a href="https://form.fillout.com/t/hxPcTnn2CVus" target="_blank" class="group relative block h-64 rounded-2xl overflow-hidden glass fade-up">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10 opacity-60"></div>
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute bottom-0 p-6 z-20 w-full">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-cyan-400 transition-colors">ניהול לידים חכם</h3>
                        <p class="text-sm text-gray-300 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500">
                            מערכת סינון וקליטה אוטומטית
                        </p>
                    </div>
                    <div class="absolute top-4 right-4 z-20 bg-black/50 backdrop-blur px-3 py-1 rounded-full text-xs border border-white/20">
                        Automation
                    </div>
                </a>

                <a href="https://form.fillout.com/t/3SJjK1C6dUus" target="_blank" class="group relative block h-64 rounded-2xl overflow-hidden glass fade-up">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10 opacity-60"></div>
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1518770660439-4636190af475?auto=format&fit=crop&q=80')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute bottom-0 p-6 z-20 w-full">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-purple-400 transition-colors">סנכרון CRM</h3>
                        <p class="text-sm text-gray-300 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500">
                            חיבור מערכות מידע בזמן אמת
                        </p>
                    </div>
                    <div class="absolute top-4 right-4 z-20 bg-black/50 backdrop-blur px-3 py-1 rounded-full text-xs border border-white/20">
                        Integration
                    </div>
                </a>

                <a href="https://form.fillout.com/t/rfV33PGun3us" target="_blank" class="group relative block h-64 rounded-2xl overflow-hidden glass fade-up">
                    <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent z-10 opacity-60"></div>
                    <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1620712943543-bcc4688e7485?auto=format&fit=crop&q=80')] bg-cover bg-center transition-transform duration-700 group-hover:scale-110"></div>
                    <div class="absolute bottom-0 p-6 z-20 w-full">
                        <h3 class="text-xl font-bold text-white mb-1 group-hover:text-cyan-400 transition-colors">AI Marketing</h3>
                        <p class="text-sm text-gray-300 transform translate-y-4 opacity-0 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-500">
                            מחולל תוכן שיווקי מבוסס בינה
                        </p>
                    </div>
                    <div class="absolute top-4 right-4 z-20 bg-black/50 backdrop-blur px-3 py-1 rounded-full text-xs border border-white/20">
                        AI
                    </div>
                </a>

            </div>
        </section>

        <section id="contact" class="py-24 text-center relative overflow-hidden rounded-3xl mt-10">
            <div class="absolute inset-0 bg-gradient-to-r from-cyan-900/20 to-purple-900/20 glass border border-white/10 rounded-3xl -z-10"></div>
            
            <h2 class="text-5xl font-bold mb-6 glow-text fade-up">מוכנים לשדרג?</h2>
            <p class="text-xl text-gray-300 max-w-2xl mx-auto mb-10 fade-up">
                השיחה הראשונה היא השלב הראשון בדרך לעסק שעובד לבד. בואו נבדוק יחד איך אוטומציה יכולה לחסוך לכם כסף.
            </p>

            <div class="flex flex-col md:flex-row justify-center items-center gap-6 fade-up">
                <a href="mailto:t025959714@gmail.com?subject=התעניינות באוטומציה" class="flex items-center gap-3 px-8 py-4 bg-cyan-500 hover:bg-cyan-400 text-black font-bold rounded-xl transition-all hover:scale-105 shadow-[0_0_20px_rgba(6,182,212,0.4)]">
                    <i class="fa-solid fa-envelope"></i> שלחי לי מייל
                </a>
                <div class="text-xl font-mono text-cyan-300 tracking-wider">
                    052-7179418
                </div>
            </div>
        </section>

    </main>

    <div id="chat-widget-button"><i class="fa-solid fa-comment-dots"></i></div>

    <div id="chat-window">
        <div id="chat-header">Roby - AI Assistant</div>
        <div id="chat-messages"></div>
        <div id="chat-input-area">
            <input type="text" id="chat-input" placeholder="איך אוכל לעזור לך היום?" autocomplete="off">
            <div id="send-btn">שלח</div>
        </div>
    </div>

    <footer class="text-center py-8 text-gray-600 text-sm border-t border-white/5 relative z-10 glass">
        <p>© 2024 T.Doitsher Automation. All systems operational.</p>
    </footer>

    <script>
        // 1. Preloader Logic
        window.addEventListener('load', () => {
            const preloader = document.getElementById('preloader');
            preloader.style.opacity = '0';
            setTimeout(() => {
                preloader.style.display = 'none';
            }, 500);
        });

        // 2. Custom Cursor Logic
        const cursor = document.getElementById('cursor');
        const cursorDot = document.getElementById('cursor-dot');

        document.addEventListener('mousemove', (e) => {
            cursorDot.style.left = e.clientX + 'px';
            cursorDot.style.top = e.clientY + 'px';
            
            // Lag effect for the outer circle
            setTimeout(() => {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            }, 80);
        });

        // Hover effect for links
        function setCursorHover() {
            document.querySelectorAll('a, button, #chat-widget-button, #send-btn').forEach(el => {
                el.addEventListener('mouseenter', () => {
                    cursor.style.width = '50px';
                    cursor.style.height = '50px';
                    cursor.style.backgroundColor = 'rgba(6, 182, 212, 0.1)';
                    cursor.style.borderColor = 'var(--secondary)';
                });
                el.addEventListener('mouseleave', () => {
                    cursor.style.width = '20px';
                    cursor.style.height = '20px';
                    cursor.style.backgroundColor = 'transparent';
                    cursor.style.borderColor = 'var(--primary)';
                });
            });
        }
        setCursorHover();

        // 3. Canvas Particles Logic
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let particlesArray;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 2;
                this.speedX = (Math.random() * 1) - 0.5;
                this.speedY = (Math.random() * 1) - 0.5;
            }
            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.x > canvas.width || this.x < 0) this.speedX = -this.speedX;
                if (this.y > canvas.height || this.y < 0) this.speedY = -this.speedY;
            }
            draw() {
                ctx.fillStyle = 'rgba(6, 182, 212, 0.5)';
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            particlesArray = [];
            for (let i = 0; i < 50; i++) {
                particlesArray.push(new Particle());
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
                particlesArray[i].draw();
                
                // Connect particles
                for (let j = i; j < particlesArray.length; j++) {
                    const dx = particlesArray[i].x - particlesArray[j].x;
                    const dy = particlesArray[i].y - particlesArray[j].y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    if (distance < 150) {
                        ctx.strokeStyle = `rgba(6, 182, 212, ${1 - distance/150})`;
                        ctx.lineWidth = 0.5;
                        ctx.beginPath();
                        ctx.moveTo(particlesArray[i].x, particlesArray[i].y);
                        ctx.lineTo(particlesArray[j].x, particlesArray[j].y);
                        ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animateParticles);
        }

        initParticles();
        animateParticles();
        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            initParticles();
        });

        // 4. Typewriter Effect
        const words = ["אוטומציה עסקית", "בניית אתרים", "בינה מלאכותית", "חיסכון בזמן"];
        let wordIdx = 0;

        function typeWriter() {
            const element = document.getElementById("typewriter");
            const word = words[wordIdx];
            let c = 0;
            element.textContent = ""; // Clear
            
            const typing = setInterval(() => {
                element.textContent += word.charAt(c);
                c++;
                if (c >= word.length) {
                    clearInterval(typing);
                    setTimeout(() => {
                        eraseWriter();
                    }, 2000);
                }
            }, 100);
        }

        function eraseWriter() {
            const element = document.getElementById("typewriter");
            const word = element.textContent;
            let c = word.length;
            
            const erasing = setInterval(() => {
                element.textContent = word.substring(0, c - 1);
                c--;
                if (c <= 0) {
                    clearInterval(erasing);
                    wordIdx = (wordIdx + 1) % words.length;
                    typeWriter();
                }
            }, 50);
        }
        
        // Start Typing
        setTimeout(typeWriter, 1500);

        // 5. Scroll Animations (Intersection Observer)
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    
                    // Trigger counter animation if it's the stats section
                    if(entry.target.querySelector('.counter')) {
                        const counters = entry.target.querySelectorAll('.counter');
                        counters.forEach(counter => {
                            const target = +counter.getAttribute('data-target');
                            const increment = target / 50;
                            let current = 0;
                            const updateCounter = () => {
                                if(current < target) {
                                    current += increment;
                                    counter.innerText = Math.ceil(current);
                                    setTimeout(updateCounter, 20);
                                } else {
                                    counter.innerText = target;
                                }
                            };
                            updateCounter();
                        });
                    }
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.fade-up, #stats').forEach((el) => observer.observe(el));

        // 6. 3D Tilt Effect logic for cards
        document.querySelectorAll('.tilt-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;
                
                const rotateX = ((y - centerY) / centerY) * -10; // Max rotation deg
                const rotateY = ((x - centerX) / centerX) * 10;

                card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.05)`;
            });

            card.addEventListener('mouseleave', () => {
                card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
            });
        });

        // --- Improved Chat Script ---
        const chatBtn = document.getElementById('chat-widget-button');
        const chatWin = document.getElementById('chat-window');
        const chatInput = document.getElementById('chat-input');
        const sendBtn = document.getElementById('send-btn');
        const chatMessages = document.getElementById('chat-messages');
        
        // סאונדים
        const sendSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3');
        const receiveSound = new Audio('https://assets.mixkit.co/active_storage/sfx/2354/2354-preview.mp3');
        sendSound.volume = 0.2;
        receiveSound.volume = 0.2;

        // פתיחה/סגירה של החלון
        chatBtn.onclick = () => {
            chatWin.style.display = chatWin.style.display === 'flex' ? 'none' : 'flex';
            if(chatWin.style.display === 'flex') chatInput.focus();
        };

        async function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;

            // סאונד שליחה
            sendSound.play();

            // הצגת הודעת משתמש
            appendMessage(text, 'user-msg');
            chatInput.value = '';

            // הצגת אינדיקטור "חושב"
            const typingDiv = document.createElement('div');
            typingDiv.className = 'typing-indicator';
            typingDiv.innerHTML = '<span></span><span></span><span></span>';
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;

            try {
                const res = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ text })
                });
                const data = await res.json();
                
                // הסרת ה"חושב"
                chatMessages.removeChild(typingDiv);
                
                // סאונד קבלה
                receiveSound.play();
                
                // אפקט הקלדה לתשובה
                typeOutMessage(data.reply || data.error, 'bot-msg');
                
            } catch (err) {
                chatMessages.removeChild(typingDiv);
                appendMessage("אופס, משהו השתבש בקשר שלי עם השרת.", 'bot-msg');
            }
        }

        function appendMessage(text, className) {
            const div = document.createElement('div');
            div.className = `msg ${className}`;
            div.innerText = text;
            chatMessages.appendChild(div);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function typeOutMessage(text, className) {
            const div = document.createElement('div');
            div.className = `msg ${className}`;
            chatMessages.appendChild(div);
            
            let i = 0;
            const speed = 25; // מהירות הקלדה
            
            function type() {
                if (i < text.length) {
                    div.innerText += text.charAt(i);
                    i++;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                    setTimeout(type, speed);
                }
            }
            type();
        }

        sendBtn.onclick = sendMessage;
        chatInput.onkeypress = (e) => { if(e.key === 'Enter') sendMessage(); };

    </script>
</body>
</html>
